# 自动化用例那些事
开发做了这么多年，经手的用例也不下数千，写过测试框架，补过用例，也可算此种颇有历练的人。而过往种种确有不堪回首的玩味。最大的领悟莫过于，写出好的用例真心不易。谨以此文为后来者扫些路障。
## 初认识自动化用例和TDD
曾经年少轻狂时，也傻傻分不清楚TDD和自动化用例的区别，想来大概是因为这2个实践均来自于Xp，且都与测试用例相关，TDD测试驱动开发更多的是一种开发过程，是通过先设计测试的方式驱动开发和设计，以达到最小设计和用例覆盖的高效的方式。只是这个过程稍微有点反直觉，而并未广泛的被采纳。而自动化测试用例作为持续集成的一个环节，被用来作为质量的保证，还是很受管理层欢迎的，因此也是一直以来最容易达成的xp实践。
刚刚接触敏捷的时候，通常的过程都是写完代码，补个用例，然后美其名曰TDD，也曾把覆盖率这等客观数据奉若神明，将分支覆盖率刷到98%的境地。可想而知有很多毫无意义的覆盖，也从未关注过用例的有效性，那时使用的还是gtest+mockcpp的方式，兴致勃勃的将一干框架特性摸得门清，恨不得凑个用例把这些特性用上。自我感觉非常良好的，采用各种技巧来处理写用例过程中碰到的问题。当时被安排完成业务模块的测试框架，限于当时技术能力的有限，确实不忍回首
## 大量的用例开发
到此时已然有了前车之鉴，更看重测试的有效性，也接触了其他人写的测试框架，在大量的使用后，多次的力不从心时，开始学习到底自动化测试到底应该怎么做，此时了解了测试分层，认识了还有BDD这样的测试方法。对测试分层有了一些深刻的理解，UT和FT的侧重点大有不同。因此也从使用者变成质疑者，种种测试框架先前设计的缺陷，在大量业务的冲击之下，开始暴露。而面对大量既有的用例和商用的压力，不敢做丝毫的大胆的修改尝试。
## 设计测试框架
时不我待，上天又给了一次机会，让我重新来一次。当然这也并非偶然，前期由于对测试分层理解的偏差，和技术能力的有限，导致大产品在商用过程中产生了对自动化用例的倒逼，强烈的渴望更高的和更有效的自动化覆盖。如此机会摆在面前，我绝不会错过，小心求证，谨慎选型，充分了解并筛选外部对整个测试框架的需求，本着追求业务本质的心态，把之前自己栽过的跟头栽这次全部抹平，可算是时下对自己最高的要求。
